(function(){"use strict";var t={5029:function(t,e,a){var r=a(6369),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("notifications",{attrs:{group:"foo"}}),e("router-view")],1)},o=[],n={name:"App"},i=n,l=a(1001),c=(0,l.Z)(i,s,o,!1,null,null,null),d=c.exports,u=a(2631),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home h-100 d-flex align-items-center justify-content-around flex-wrap"},[t._m(0),e("div",{staticClass:"login_divs bg-white p-2 border border-light"},[e("form",{staticClass:"d-flex flex-column align-items-center p-2 rounded",attrs:{id:"login_form",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.authenticateUser.apply(null,arguments)}}},[t._m(1),e("div",{staticClass:"mb-3 w-100",attrs:{id:"password_box"}},[e("i",{staticClass:"fa-solid fa-eye-slash",attrs:{id:"eye-icon"},on:{click:t.pass_visibility}}),e("input",{staticClass:"form-label border w-100 p-2 border-light rounded",attrs:{type:"password",name:"password",id:"login_password",placeholder:"Enter password"}})]),t._m(2),e("hr")]),e("div",{staticClass:"d-flex flex-column align-items-center"},[e("p",[t._v("New user? Please sign up first")]),e("button",{staticClass:"btn btn-success",attrs:{id:"sign-up-button",type:"button"},on:{click:t.signUpView}},[t._v(" Sign up ")])])])])},m=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"login_divs"},[e("h1",[t._v(" TrackU")]),e("p",[t._v(" Track yourself and improve based on data ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3 w-100"},[e("input",{staticClass:"form-label border w-100 p-2 border-light rounded",attrs:{type:"email",name:"email",id:"login_email",placeholder:"Enter email",required:""}})])},function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v(" Login ")])])}],h=(a(1703),{name:"HomeView",components:{},data(){return{userAuthenticated:!1}},methods:{pass_visibility:function(){let t=document.getElementById("login_password"),e=document.getElementById("eye-icon");"password"==t.type?(t.type="text",e.classList.replace("fa-eye-slash","fa-eye")):(t.type="password",e.classList.replace("fa-eye","fa-eye-slash"))},testwebhook:async function(){let t={text:"Hello from a VUE JS!"};await fetch("https://chat.googleapis.com/v1/spaces/AAAALDg1w4U/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=gV9dwwrY0KJfH2aIqgPLb5M6EeW5WbNvcLeDhmX37ZA%3D",{method:"POST",body:JSON.stringify(t)}).then((t=>t.json())).then((t=>console.log(t)))},testfunc:async function(){await fetch("http://localhost:8000/testapi").then((t=>t.json())).then((t=>console.log(t)))},authenticateUser:async function(){let t=document.getElementById("login_form"),e=new FormData(t);await fetch("http://localhost:8000/api/login",{method:"POST",body:e,credentials:"include"}).then((t=>{if(console.log(t.status),400==t.status)throw new Error("Something went wrong!");return t.json()})).then((t=>{console.log(t),t.login?(this.$router.push("/dashboard"),r["default"].notify({group:"foo",type:"success",title:"Successfully logged in!",text:""})):r["default"].notify({group:"foo",type:"warn",title:"Invalid email/password!",text:"Please retype the correct info."})})).catch((t=>{console.error("ERROR",t),this.$router.replace("/error")}))},signUpView:function(){this.$router.push("/signup")}}}),f=h,_=(0,l.Z)(f,p,m,!1,null,"7fe40a28",null),g=_.exports,v=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"main-div"}},[e("NavBar"),e("div",{staticClass:"d-flex h-100"},[e("div",{staticClass:"bg-white p-4 w-75",attrs:{id:"main-container"}},[e("h2",{staticClass:"mt-3 fs-1 text-decoration-underline"},[t._v(" My Trackers ")]),e("div",{staticClass:"d-flex flex-wrap w-100",attrs:{id:"all-trackers "}},t._l(t.trackers,(function(t){return e("TrackerInfo",{key:t.tracker_id,attrs:{tracker_name:t.tracker_name,tracker_type:t.tracker_type,last_logged:t.last_logged,tracker_id:t.tracker_id}})})),1)]),e("div"),e("div",{staticClass:"p-3 ms-2 mt-2 me-2",attrs:{id:"extra_options"}},[e("h3",{staticClass:"text-decoration-underline"},[t._v(" Options ")]),e("p",{staticClass:"mt-2"},[t._v(" Report format: ")]),e("div",{staticClass:"d-flex mt-3 justify-content-center"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.curr_format,expression:"curr_format"}],staticClass:"ms-3",attrs:{type:"radio",name:"format",id:"html",value:"html"},domProps:{checked:t._q(t.curr_format,"html")},on:{change:function(e){t.curr_format="html"}}}),e("label",{staticClass:"ms-1"},[t._v(" HTML ")])]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.curr_format,expression:"curr_format"}],staticClass:"ms-3",attrs:{type:"radio",name:"format",id:"pdf",value:"pdf"},domProps:{checked:t._q(t.curr_format,"pdf")},on:{change:function(e){t.curr_format="pdf"}}}),e("label",{staticClass:"ms-1"},[t._v(" PDF ")])])]),e("div",{staticClass:"d-flex justify-content-center flex-wrap mt-3",attrs:{id:"export_trackers"}},[e("button",{staticClass:"me-3 btn btn-outline-secondary",attrs:{id:"export_button"},on:{click:t.exportTrackers}},[t._v(" Export Trackers ")]),e("button",{staticClass:"mt-2 btn btn-outline-secondary",attrs:{id:"download_button"},on:{click:t.downloadTrackers}},[t._v(" Download ")])])])])],1)},y=[],b=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"navbar navbar-expand-lg navbar-light text-white w-100",attrs:{id:"navbar"}},[e("div",{staticClass:"container-fluid"},[e("p",{staticClass:"navbar-brand mt-2"},[e("router-link",{staticClass:"text-decoration-none text-white ms-4 fs-3",attrs:{to:"/dashboard"}},[t._v(" TrackU ")])],1),t._m(0),e("div",{staticClass:"collapse navbar-collapse offset-md-3 text-white",attrs:{id:"navbarSupportedContent"}},[e("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link active text-white",attrs:{to:"/dashboard","aria-current":"page"}},[t._v("Dashboard")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link active text-white",attrs:{to:{name:"tracker_form",params:{action:"create"}}}},[t._v(" Create tracker ")])],1),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active text-white",attrs:{"aria-current":"page"},on:{click:t.logOutUser}},[t._v("Log out")])])])])])])},w=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],k={name:"NavBar",methods:{logOutUser:async function(){await fetch("http://localhost:8000/api/logout",{credentials:"include"}).then((t=>t.json())).then((t=>{console.log(t),this.$router.replace({path:"/"})}))}}},C=k,x=(0,l.Z)(C,b,w,!1,null,"f13c62be",null),S=x.exports,D=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"card ms-3 tracker-card mt-2",staticStyle:{width:"15rem",height:"15rem"}},[e("p",{staticClass:"mt-3 mx-auto w-75 border bg-secondary rounded fs-2 text-center fw-light text-white",attrs:{id:"tracker_name"}},[t._v(" "+t._s(t.tracker_name)+" ")]),e("div",{staticClass:"dropdown mt-2"},[e("button",{staticClass:"btn dropdown-toggle options_button",attrs:{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Options ")]),e("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"log_form",params:{tracker_id:t.tracker_id,action:"create"}}}},[t._v(" Create log ")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"view_logs",params:{tracker_id:t.tracker_id}}}},[t._v(" View logs ")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"tracker_form",params:{action:"edit",tracker_id:t.tracker_id}}}},[t._v(" Edit tracker ")])],1),e("li",[e("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(e){return t.deleteTracker(t.tracker_id)}}},[t._v(" Delete Tracker ")])])]),e("p",{staticClass:"mt-4 fw-bold fst-italic"},[e("span",{staticClass:"text-decoration-underline fw-bolder"},[t._v("Last logged:")]),t._v(" "+t._s(t.last_logged)+" ")])])])])},P=[],T={name:"TrackerInfo",props:["tracker_id","tracker_name","last_logged"],methods:{deleteTracker:async function(t){await fetch("http://localhost:8000/api/delete_tracker?tracker_id="+t,{credentials:"include"}).then((t=>(400===t.status&&(r["default"].notify({group:"foo",type:"error",title:"Something went wrong!",text:"Unable to delete tracker. Please try again."}),window.location.reload()),t.json()))).then((t=>{r["default"].notify({group:"foo",type:"sucess",title:"Tracker deleted successfully!",text:"Tracker deleted successfully."}),console.log(t)}))}}},E=T,L=(0,l.Z)(E,D,P,!1,null,"4dfeacf6",null),B=L.exports,N=a(6265),O=a.n(N),j={name:"DashBoardView",components:{NavBar:S,TrackerInfo:B},data(){return{user_name:"user",trackers:[],curr_format:"html",tracker_list:[]}},beforeMount(){this.fetchUserData()},mounted(){let t=document.getElementById("download_button");t.style.display="none"},methods:{fetchUserData:async function(){await fetch("http://localhost:8000/api/dashboard",{credentials:"include"}).then((t=>{if(401==t.status)throw new Error("Please login!");return t.json()})).then((t=>{this.trackers=t.dashboard_data,this.user_name=t.user_name})).catch((t=>{console.log(t),this.$router.push("/")}))},TrackerFormNavigate:function(){this.$router.push({name:"tracker_form",params:{action:"create"}})},exportTrackers:function(){var t=new EventSource("http://localhost:8000/api/export_trackers",{withCredentials:!0});t.addEventListener("message",(function(t){console.log("Successfully received stream ** ** **");let e=t.data;if(console.log(e),"csv created "===e){r["default"].notify({group:"foo",type:"success",title:"Download ready!",text:"Your Trackers are ready to download!"});let t=document.getElementById("download_button");t.style.display="block"}else console.log("csv not created yet!"),r["default"].notify({group:"foo",type:"success",title:"Something went wrong!",text:"Unable to process request. Please try again."})}),!1),t.addEventListener("error",(function(e){t.close()}),!1)},downloadTrackers:function(){O()({url:"http://localhost:8000/api/download_trackers",method:"GET",responseType:"blob",withCredentials:!0}).then((t=>{console.log(t),console.log(typeof t.data);const e=new Blob([t.data],{type:"application/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(e);let r=this.user_name+"_trackers.csv";a.setAttribute("download",r),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href)})).catch((t=>{console.error(t)}))}},watch:{curr_format:function(t){fetch("http://localhost:8000/api/change_format?format="+t,{credentials:"include"}).then((t=>t.json())).then((t=>console.log(t)))}}},I=j,$=(0,l.Z)(I,v,y,!1,null,"90c80068",null),F=$.exports,U=function(){var t=this,e=t._self._c;return e("center",[e("h1",[t._v("404 not found")]),e("h2",[t._v("Something went wrong.")]),e("router-link",{staticClass:"navbar-brand ms-5 text-white",attrs:{to:"/dashboard"}},[t._v("Go back home ")])],1)},A=[],M={name:"Error"},Z=M,V=(0,l.Z)(Z,U,A,!1,null,"2961043c",null),R=V.exports,q=function(){var t=this,e=t._self._c;return e("div",[e("NavBar"),e("h1",{staticClass:"mt-4 text-center text-decoration-underline"},[t._v(" "+t._s(t.tracker_name)+" ")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"mx-auto bg-white border rounded mt-4",attrs:{id:"log-form-container"}},["create"===t.action?e("h2",{staticClass:"mt-4 text-center text-decoration-underline p-4"},[t._v(" Create a log ")]):t._e(),"edit"===t.action?e("h2",{staticClass:"mt-4 text-center text-decoration-underline p-4"},[t._v(" Edit log ")]):t._e(),e("form",{staticClass:"d-flex flex-column align-items-center p-2 w-100 rounded mt-3",attrs:{id:"log-form",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.sendFormData.apply(null,arguments)}}},[e("div",{staticClass:"d-flex justify-content-start align-items-center mb-3 w-100 p-3"},[e("label",{attrs:{for:"note"}},[t._v(" Note: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],staticClass:"ms-4 p-2",attrs:{name:"note",type:"text"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})]),"Numerical"===t.tracker_type||"Time Duration"===t.tracker_type?e("div",{staticClass:"d-flex justify-content-start align-items-center mb-3 w-100 p-3"},[e("label",{attrs:{for:"value"}},[t._v(" Value: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"ms-3 p-2",attrs:{name:"value"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),e("span",{staticClass:"ms-3 fw-bold"},[t._v(" "+t._s(t.tracker_settings[0]))])]):e("div",{staticClass:"d-flex justify-content-start align-items-center mb-3 w-100 p-3"},[e("label",{attrs:{for:"value"}},[t._v(" Value: ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"ms-3 p-2",attrs:{name:"value"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.value=e.target.multiple?a:a[0]}}},t._l(t.tracker_settings,(function(a){return e("option",{key:a,staticClass:"p-2"},[t._v(" "+t._s(a)+" ")])})),0)]),e("div",{staticClass:"d-flex justify-content-start align-items-center mb-3 w-100 p-3"},[e("label",[t._v(" When: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.timestamp,expression:"timestamp"}],staticClass:"ms-3 p-2",attrs:{id:"datetime",name:"timestamp",type:"datetime-local"},domProps:{value:t.timestamp},on:{input:function(e){e.target.composing||(t.timestamp=e.target.value)}}})]),"create"===t.action?e("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v(" Create log ")]):t._e(),"edit"===t.action?e("button",{attrs:{type:"submit"}},[t._v(" Edit log ")]):t._e()])])])],1)},H=[],K={name:"LogFormView",components:{NavBar:S},data(){return{tracker_id:this.$route.params.tracker_id,log_id:"",action:this.$route.params.action,tracker_name:"",tracker_type:"",tracker_settings:[],timestamp:"",note:"",value:""}},computed:{},beforeMount(){"create"===this.action?this.createLogForm():this.editLogForm()},methods:{currentDateTime:function(){let t=new Date,e=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+"T"+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2);this.timestamp=e},createLogForm:async function(){await fetch("http://localhost:8000/api/create_log_form?tracker_id="+this.tracker_id,{credentials:"include"}).then((t=>(400===t.status&&this.$router.push("/error"),t.json()))).then((t=>{console.log(t),this.tracker_name=t.tracker_name,this.tracker_type=t.tracker_type,this.tracker_settings=t.tracker_settings,"Multiple Choice"!=this.tracker_type&&"Boolean"!=this.tracker_type||(this.value=t.tracker_settings[0]),this.currentDateTime()})).catch((t=>console.log(t)))},sendFormData:async function(){let t=document.getElementById("log-form"),e=new FormData(t);if("create"===this.action){await fetch("http://localhost:8000/api/add_log?tracker_id="+this.tracker_id,{method:"POST",credentials:"include",body:e}).then((t=>(400===t.status&&(r["default"].notify({group:"foo",type:"error",title:"Something went wrong!",text:"Unable to add log. Please check and submit again."}),window.location.reload()),t.json()))).then((t=>{console.log(t),r["default"].notify({group:"foo",type:"success",title:"Log added!",text:"Successfully added log!"}),this.$router.push({path:"/view_logs/"+this.tracker_id})}))}else if("edit"===this.action){await fetch("http://localhost:8000/api/edit_log?tracker_id="+this.tracker_id+"&log_id="+this.log_id,{method:"POST",credentials:"include",body:e}).then((t=>{400===t.status&&(r["default"].notify({group:"foo",type:"error",title:"Something went wrong!",text:"Unable to edit log. Please check and submit again."}),window.location.reload())})).then((t=>{r["default"].notify({group:"foo",type:"success",title:"Log edited!",text:"Successfully edited log!"}),this.$router.push({path:"/view_logs/"+this.tracker_id}),console.log(t)}))}},editLogForm:async function(){this.log_id=this.$route.params.log_id;await fetch("http://localhost:8000/api/edit_log_form?tracker_id="+this.tracker_id+"&log_id="+this.log_id,{credentials:"include"}).then((t=>(400===t.status&&this.$router.push("/error"),t.json()))).then((t=>{console.log(t);let e=t.log_data;this.log_id=e.log_id,this.timestamp=e.timestamp,this.value=e.value,this.tracker_settings=t.tracker_settings,this.note=e.note,this.tracker_type=t.tracker_type,this.tracker_name=t.tracker_name}))}}},Y=K,z=(0,l.Z)(Y,q,H,!1,null,"dce01a56",null),W=z.exports,G=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"main-div"}},[e("NavBar"),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"mx-auto mt-3 bg-white w-75 p-4 ms-4",attrs:{id:"main-container"}},[e("h2",{staticClass:"text-decoration-underline mt-3"},[t._v(" "+t._s(t.tracker_name))]),"Boolean"==t.tracker_type||"Multiple Choice"==t.tracker_type?e("DoughnutChart",{attrs:{chartData:t.chartData}}):e("BarChart",{attrs:{chartData:t.chartData}}),e("table",{staticClass:"table p-3 w-100 table-bordered mt-4"},[t._m(0),e("tbody",t._l(t.logs,(function(a){return e("tr",{key:a.log_id},[e("td",[t._v(" "+t._s(a.note)+" ")]),e("td",[t._v(" "+t._s(a.value)+" ")]),e("td",[t._v(" "+t._s(a.timestamp)+" ")]),e("td",[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" Options ")]),e("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton1"}},[e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"log_form",params:{tracker_id:t.tracker_id,log_id:a.log_id,action:"edit"}}}},[t._v(" Edit log ")])],1),e("li",[e("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(e){return t.deleteLog(a.log_id)}}},[t._v("Delete log")])])])])])])})),0)])],1),e("div",{staticClass:"mt-4 p-3 ms-2 me-4",attrs:{id:"extra_options"}},[e("h3",{staticClass:"text-decoration-underline"},[t._v(" Options")]),e("div",{staticClass:"d-flex justify-content-center flex-wrap mt-3 mb-3",attrs:{id:"export_logs"}},[e("p",[t._v(" Export logs as csv: ")]),e("button",{staticClass:"btn btn-outline-secondary mt-2",attrs:{id:"export_button"},on:{click:t.exportLogs}},[t._v(" Export Logs ")]),e("button",{staticClass:"ms-2 btn btn-outline-secondary mt-2",attrs:{id:"download_button"},on:{click:t.downloadLogs}},[t._v(" Download ")])]),e("router-link",{staticClass:"link-secondary fs-5 mt-4",attrs:{to:{name:"log_form",params:{tracker_id:t.tracker_id,action:"create"}}}},[t._v(" Create log ")])],1)])],1)},J=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v(" Note ")]),e("th",[t._v(" Value ")]),e("th",[t._v(" Timestamp ")]),e("th",[t._v(" Settings ")])])])}],Q=function(){var t=this,e=t._self._c;return e("Doughnut",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,"chart-id":t.chartId,"dataset-id-key":t.datasetIdKey,plugins:t.plugins,"css-classes":t.cssClasses,styles:t.styles,width:t.width,height:t.height}})},X=[],tt=a(4483),et=a(741);et.kL.register(et.Dx,et.u,et.De,et.qi,et.uw);var at={name:"DoughnutChart",components:{Doughnut:tt.$I},props:{chartId:{type:String,default:"doughnut-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>{}}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1}}}},rt=at,st=(0,l.Z)(rt,Q,X,!1,null,"5b79e560",null),ot=st.exports,nt=function(){var t=this,e=t._self._c;return e("Bar",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,"chart-id":t.chartId,"dataset-id-key":t.datasetIdKey,plugins:t.plugins,"css-classes":t.cssClasses,styles:t.styles,width:t.width,height:t.height}})},it=[];et.kL.register(et.Dx,et.u,et.De,et.ZL,et.uw,et.f$);var lt={name:"BarChart",components:{Bar:tt.$Q},props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:200},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Object,default:()=>{}},chartData:{type:Object,default:()=>{}}},data(){return{chartOptions:{responsive:!0}}}},ct=lt,dt=(0,l.Z)(ct,nt,it,!1,null,null,null),ut=dt.exports,pt={name:"ViewLogs",components:{NavBar:S,DoughnutChart:ot,BarChart:ut},data(){return{user_name:"user",log_id:"",note:"",value:"",timestamp:"",tracker_id:this.$route.params.tracker_id,logs:[],tracker_name:"",tracker_type:"",chart_labels:[],chart_data:[],chartData:{}}},mounted(){let t=document.getElementById("download_button");t.style.display="none",this.fetchLogData();fetch("http://localhost:8000/api/getchartdata?tracker_id="+this.tracker_id,{credentials:"include"}).then((t=>(400===t.status&&this.$router.push("/error"),t.json()))).then((t=>{console.log(t),"Numerical"===this.tracker_type||"Time Duration"===this.tracker_type?this.chart_labels=t.labels_nt:this.chart_labels=t.labels_mb;for(let r of this.chart_labels)this.chart_data.push(t.data_dict[r]);console.log(this.chart_labels),console.log(this.chart_data);let e=[],a=[];e="Multiple Choice"===this.tracker_type?["#41B883","#E46651","#00D8FF","#DD1B16"]:"Boolean"===this.tracker_type?["#41B883","#E46651"]:["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)","rgba(201, 203, 207, 0.2)"],this.chartData={labels:this.chart_labels,datasets:[{label:"Visualise your progress",backgroundColor:e,borderColor:a,data:this.chart_data,borderWidth:1}]},console.log(this.chartData)}))},methods:{fetchLogData:async function(){await fetch("http://localhost:8000/api/view_logs?tracker_id="+this.tracker_id,{credentials:"include"}).then((t=>(400===t.status&&this.$router.push("/error"),t.json()))).then((t=>{console.log(t),this.user_name=t.user_name,this.logs=t.logs,this.tracker_name=t.tracker_name,this.tracker_type=t.tracker_type}))},deleteLog:async function(t){await fetch("http://localhost:8000/api/delete_log?log_id="+t,{credentials:"include"}).then((t=>(400===t.status&&(r["default"].notify({group:"foo",type:"error",title:"Something went wrong!",text:"Error while deleting the log."}),window.location.reload()),t.json()))).then((t=>{r["default"].notify({group:"foo",type:"success",title:"Log deleted!",text:"Successfully deleted log."}),console.log(t)}))},createLogForm:function(){this.$router.push("/log_form/"+this.tracker_id+"/create")},exportLogs:function(){var t=new EventSource("http://localhost:8000/api/export_logs",{withCredentials:!0});t.addEventListener("message",(function(t){console.log("Successfully received stream ** ** **");let e=t.data;if(console.log(e),"csv created "===e){r["default"].notify({group:"foo",type:"success",title:"Download ready!",text:"Your logs are ready to download!"});let t=document.getElementById("download_button");t.style.display="block"}else console.log("csv not created yet!")}),!1),t.addEventListener("error",(function(e){t.close()}),!1)},downloadLogs:function(){O()({url:"http://localhost:8000/api/download_logs",method:"GET",responseType:"blob",withCredentials:!0}).then((t=>{console.log(t),console.log(typeof t.data);const e=new Blob([t.data],{type:"application/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(e);let r=this.user_name+"_logs.csv";a.setAttribute("download",r),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href)})).catch((t=>{console.error(t)}))}}},mt=pt,ht=(0,l.Z)(mt,G,J,!1,null,"24c92678",null),ft=ht.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-100",attrs:{id:"main-div"}},[e("NavBar"),"create"===t.action?e("h1",{staticClass:"mt-4 text-center text-decoration-underline"},[t._v(" Create Tracker ")]):t._e(),"edit"===t.action?e("h1",{staticClass:"mt-4 text-center text-decoration-underline"},[t._v(" Edit Tracker ")]):t._e(),e("div",{staticClass:"bg-white p-2 mx-auto mt-4",attrs:{id:"tracker-form-container"}},[e("form",{staticClass:"d-flex flex-column align-items-center p-2 w-100 rounded",attrs:{id:"tracker-form",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.sendFormData.apply(null,arguments)}}},[e("div",{staticClass:"mb-3 w-100"},[e("label",{staticClass:"form-label",attrs:{for:"tracker_name"}},[t._v(" Name: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tracker_name,expression:"tracker_name"}],staticClass:"ms-3 p-2",attrs:{name:"tracker_name",type:"text"},domProps:{value:t.tracker_name},on:{input:function(e){e.target.composing||(t.tracker_name=e.target.value)}}})]),e("div",{staticClass:"mb-3 w-100"},[e("label",{staticClass:"form-label",attrs:{for:"tracker_type"}},[t._v(" Tracker Type: ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.tracker_type,expression:"tracker_type"}],staticClass:"ms-3 p-2",attrs:{name:"tracker_type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.tracker_type=e.target.multiple?a:a[0]},t.clearSettings]}},t._l(t.tracker_list,(function(a){return e("option",{key:a,staticClass:"p-2"},[t._v(" "+t._s(a)+" ")])})),0)]),e("div",{staticClass:"mb-3 w-100"},[e("label",{staticClass:"form-label",attrs:{for:"description"}},[t._v(" Description: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"ms-3 p-2",attrs:{name:"description",type:"text"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),e("div",{staticClass:"mb-3 w-100",attrs:{id:"settings"}},[e("h4",{staticClass:"text-decoration-underline mb-2"},[t._v(" Settings ")]),"Time Duration"===t.tracker_type?e("div",[e("label",{attrs:{for:"settings"}},[t._v(" Set time unit: ")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.time_duration_set,expression:"time_duration_set"}],staticClass:"ms-3 p-2",attrs:{name:"settings"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.time_duration_set=e.target.multiple?a:a[0]}}},t._l(t.time_options,(function(a){return e("option",{key:a,staticClass:"p-2"},[t._v(" "+t._s(a)+" ")])})),0)]):t._e(),"Boolean"===t.tracker_type?e("div",[e("select",{staticClass:"ms-3 p-2",attrs:{disabled:""}},[e("option",[t._v(" Yes/No ")]),t._l(t.bool_options,(function(a){return e("option",{key:a},[t._v(" "+t._s(a)+" ")])}))],2)]):t._e(),"Numerical"===t.tracker_type?e("div",[e("label",{attrs:{for:"settings"}},[t._v(" Set unit: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tracker_settings,expression:"tracker_settings"}],staticClass:"ms-3 p-2",attrs:{name:"settings",placeholder:"e.g. kms, laps, rounds",type:"text"},domProps:{value:t.tracker_settings},on:{input:function(e){e.target.composing||(t.tracker_settings=e.target.value)}}})]):t._e(),"Multiple Choice"===t.tracker_type?e("div",[e("label",{attrs:{for:"settings"}},[t._v(" Add options: ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tracker_settings,expression:"tracker_settings"}],staticClass:"ms-3 p-2",attrs:{name:"settings",placeholder:"e.g. happy, sad, angry",type:"text"},domProps:{value:t.tracker_settings},on:{input:function(e){e.target.composing||(t.tracker_settings=e.target.value)}}})]):t._e()]),"create"===t.action?e("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v(" Add Tracker ")]):t._e(),"edit"===t.action?e("button",{staticClass:"btn btn-secondary",attrs:{type:"submit"}},[t._v(" Edit Tracker ")]):t._e()])])],1)},gt=[],vt={name:"TrackerForm",components:{NavBar:S},data(){return{tracker_id:"",action:this.$route.params.action,tracker_name:"",tracker_type:"Numerical",tracker_settings:"",description:"",tracker_list:["Numerical","Boolean","Time Duration","Multiple Choice"],time_options:["hours","minutes","seconds"],bool_options:["Yes","No"],time_duration_set:"hours"}},beforeMount(){"create"===this.action&&(session["user_id"]||this.$router.push("/error")),"edit"===this.action&&this.fetchFormData()},methods:{fetchFormData:async function(){this.tracker_id=this.$route.params.tracker_id;await fetch("http://localhost:8000/api/edit_tracker_form?tracker_id="+this.tracker_id,{credentials:"include"}).then((t=>(400===t.status&&this.$router.push("/error"),t.json()))).then((t=>{let e=t.tracker_details;this.tracker_name=e.tracker_name,this.description=e.description,this.tracker_type=e.tracker_type;let a=e.tracker_settings,r="";for(let s of a)r+=s+",";r=r.slice(0,-1),this.tracker_settings=r,"Time Duration"===this.tracker_type&&(this.time_duration_set=r)}))},sendFormData:async function(){let t=document.getElementById("tracker-form"),e=new FormData(t);if("create"===this.action){await fetch("http://localhost:8000/api/create_tracker",{method:"POST",credentials:"include",body:e}).then((t=>(400===t.status&&(r["default"].notify({group:"foo",type:"error",title:"Something went wrong!",text:"Unable to add tracker. Please check and submit again."}),this.$router.push("/error")),t.json()))).then((t=>{console.log(t),r["default"].notify({group:"foo",type:"success",title:"Tracker created!",text:"Successfully added tracker!"}),this.$router.replace({path:"/dashboard"})}))}if("edit"===this.action){await fetch("http://localhost:8000/api/edit_tracker?tracker_id="+this.tracker_id,{method:"POST",credentials:"include",body:e}).then((t=>(console.log(t),400===t.status&&(r["default"].notify({group:"foo",type:"error",title:"Something went wrong!",text:"Unable to edit tracker. Please check and submit again."}),this.$router.push("/error")),t.json()))).then((t=>{console.log(t),r["default"].notify({group:"foo",type:"success",title:"Tracker edited!",text:"Successfully edited tracker!"}),this.$router.replace({path:"/dashboard"})}))}},clearSettings:function(){this.tracker_settings=""}}},yt=vt,bt=(0,l.Z)(yt,_t,gt,!1,null,"24405733",null),wt=bt.exports,kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-auto",attrs:{id:"signup_form"}},[e("h1",{staticClass:"pt-3 mt-3 text-decoration-underline"},[t._v(" Sign up form ")]),e("form",{staticClass:"d-flex flex-column align-items-center p-2 w-100 rounded mt-3",attrs:{id:"signup_form",method:"POST"},on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[t._m(0),t._m(1),e("div",{staticClass:"mb-3 w-100"},[e("i",{staticClass:"fa-solid fa-eye-slash eye-icon",attrs:{id:"eye-icon-pass"},on:{click:t.pass_visibility}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-label border w-100 p-2 border-light rounded",attrs:{name:"password",type:"password",id:"password",placeholder:"Enter password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("p",{staticClass:"fs-6 fw-lighter fst-italic"},[t._v(" (Between 8 - 15 chars with 1 uppercase, 1 lowercase, 1 digit & 1 special char)")]),!t.checkPasswordValid&&t.password.length>0?e("p",[t._v(" Password must fulfill the criteria ")]):t._e()]),e("div",{staticClass:"mb-3 w-100"},[e("i",{staticClass:"fa-solid fa-eye-slash eye-icon",attrs:{id:"eye-icon-conpass"},on:{click:t.con_pass_visibility}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"form-label border w-100 p-2 border-light rounded",attrs:{type:"password",id:"confirm_password",placeholder:"Confirm password"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),!t.confirmPasswordValid&&t.confirmPassword.length>0?e("p",[t._v(" Must be the same as password ")]):t._e()]),t._m(2),e("hr")]),e("div",{staticClass:"d-flex flex-column align-items-center"},[e("p",[t._v("Already registered ? Please login")]),e("button",{staticClass:"btn btn-success",attrs:{id:"login-button",type:"button"},on:{click:t.loginPage}},[t._v(" Login ")])])])},Ct=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3 w-100"},[e("input",{staticClass:"form-label border w-100 p-2 border-light rounded",attrs:{name:"name",type:"text",id:"username",placeholder:"Enter your name",required:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3 w-100"},[e("input",{staticClass:"form-label border w-100 p-2 border-light rounded",attrs:{name:"email",type:"email",id:"email",placeholder:"Enter email",required:""}})])},function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"btn btn-primary w-100",attrs:{type:"submit"}},[t._v("Sign up")])])}],xt={name:"SignUpView",data(){return{regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,15}$/,password:"",confirmPassword:"",submit_success:!0}},computed:{checkPasswordValid:function(){return console.log("INSIDE CHECKPASS"),!!this.password.match(this.regex)},confirmPasswordValid:function(){return this.confirmPassword===this.password}},methods:{pass_visibility:function(){let t=document.getElementById("password"),e=document.getElementById("eye-icon-pass");"password"==t.type?(t.type="text",e.classList.replace("fa-eye-slash","fa-eye")):(t.type="password",e.classList.replace("fa-eye","fa-eye-slash"))},con_pass_visibility:function(){let t=document.getElementById("confirm_password"),e=document.getElementById("eye-icon-conpass");"password"==t.type?(t.type="text",e.classList.replace("fa-eye-slash","fa-eye")):(t.type="password",e.classList.replace("fa-eye","fa-eye-slash"))},submitForm:async function(){if(this.checkPasswordValid&&this.confirmPasswordValid){this.submit_success=!0;let t=document.getElementById("signup_form"),e=new FormData(t);console.log(e);await fetch("http://localhost:8000/api/signup",{method:"POST",credentials:"include",body:e}).then((t=>(400===t.status&&(r["default"].notify({group:"foo",type:"warn",title:"Something went wrong!",text:"Please submit again."}),window.location.reload()),t.json()))).then((t=>{console.log(t),r["default"].notify({group:"foo",type:"success",title:"Successfully signed up!",text:"Please login to continue."}),this.$router.push("/")}))}else r["default"].notify({group:"foo",type:"warn",title:"Incorect info entered!",text:"Please retype the correct info."}),this.submit_success=!1},loginPage:function(){this.$router.push("/")}}},St=xt,Dt=(0,l.Z)(St,kt,Ct,!1,null,"6699e2e8",null),Pt=Dt.exports;r["default"].use(u.ZP);const Tt=[{path:"/",name:"home",component:g},{path:"/dashboard",name:"dashboard",component:F},{path:"/error",name:"error",component:R},{path:"/log_form/:tracker_id/:action/:log_id?",name:"log_form",component:W},{path:"/view_logs/:tracker_id",name:"view_logs",component:ft},{path:"/tracker_form/:action/:tracker_id?",name:"tracker_form",component:wt},{path:"/signup",name:"signup_form",component:Pt}],Et=new u.ZP({mode:"history",base:"/",routes:Tt});var Lt=Et,Bt=a(3822);r["default"].use(Bt.ZP);const Nt=new Bt.ZP.Store({state:{access_token:""},mutations:{setAuthToken(t,e){t.access_token=e}}});var Ot=a(7131),jt=a.n(Ot),It=a(9907);(0,It.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),r["default"].config.productionTip=!1,r["default"].use(jt()),new r["default"]({router:Lt,store:Nt,render:t=>t(d)}).$mount("#app")}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,r,s,o){if(!r){var n=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],o=t[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(i=!1,o<n&&(n=o));if(i){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[r,s,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,o,n=r[0],i=r[1],l=r[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var d=l(a)}for(e&&e(r);c<n.length;c++)o=n[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},r=self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(5029)}));r=a.O(r)})();
//# sourceMappingURL=app.b7162d9a.js.map